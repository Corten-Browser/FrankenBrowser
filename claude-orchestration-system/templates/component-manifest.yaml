# Component Manifest v2.0
# This file defines the component's metadata, dependencies, and configuration
#
# NAMING CONVENTION (v0.3.0):
#   Component names MUST use underscores only: audio_processor (not audio-processor)
#   Pattern: [a-z][a-z0-9_]*
#   This ensures compatibility with Python imports and all programming languages.
#
# MANIFEST VERSION (v0.13.0):
#   Manifest schema v2.0 includes user_facing_features for feature coverage testing.
#   All user-facing components (cli_application, library, web_server, gui_application)
#   MUST declare their features for automatic testing.

# Component identification
name: {{COMPONENT_NAME}}
version: 1.0.0
type: cli_application  # cli_application|library|web_server|gui_application|generic

# Component description
description: {{COMPONENT_RESPONSIBILITY}}

# Programming language
language: python  # python|rust|javascript|typescript|go

# User-facing features (NEW - v0.13.0)
# REQUIRED for cli_application, library, web_server, gui_application
# OPTIONAL for generic components
user_facing_features:
  # For CLI applications: Declare all CLI commands
  cli_commands:
    - name: analyze
      description: Analyze input data and generate reports
      entry_module: components.{{COMPONENT_NAME}}.src.cli
      smoke_test: "python -m {entry_module} analyze --help"
      test_scenario: "python -m {entry_module} analyze test_data/ --output results.xlsx"

    # Example: Additional command
    # - name: export
    #   description: Export results in various formats
    #   entry_module: components.{{COMPONENT_NAME}}.src.cli
    #   smoke_test: "python -m {entry_module} export --help"

  # For libraries: Declare all public API
  public_api:
    - class: ExampleClass
      module: components.{{COMPONENT_NAME}}.src.api
      methods:
        - process_data
        - get_results
      description: Main processing class

    - function: example_function
      module: components.{{COMPONENT_NAME}}.src.utils
      description: Utility function for data transformation

    # Example: Another API entry
    # - class: DataManager
    #   module: components.{{COMPONENT_NAME}}.src.manager
    #   methods:
    #     - save
    #     - load

  # For web servers: Declare all HTTP endpoints
  http_endpoints:
    - path: /api/health
      method: GET
      description: Health check endpoint

    - path: /api/data
      method: POST
      description: Submit data for processing

    # Example: Additional endpoint
    # - path: /api/results/{id}
    #   method: GET
    #   description: Retrieve processing results

# Legacy public_api (DEPRECATED - use user_facing_features instead)
# public_api:
#   modules: []
#   classes: []
#   functions: []
#   docs: docs/API.md

# Component dependencies
dependencies:
  # Components this component imports from
  imports:
    - name: base_types
      version: "^1.0.0"
      import_from: "components.base_types"
      # What we use from this dependency
      uses:
        - DataModel
        - ValidationError

    # Example: another dependency
    # - name: audio_codec
    #   version: "^1.0.0"
    #   import_from: "components.audio_codec.api"
    #   uses:
    #     - decode
    #     - encode

  # Optional dependencies (feature flags)
  optional:
    [] # - name: gpu_accelerator
       #   version: "^1.0.0"
       #   import_from: "components.gpu_accelerator"
       #   when: "gpu_enabled"

  # Build/development dependencies
  build:
    [] # - name: proto_compiler
       #   version: "^1.0.0"

# Token budget tracking
tokens:
  # Maximum tokens for this component type
  limit: 80000  # Varies by type: base=40k, core=60k, feature=80k, integration=100k

  # Current estimated tokens
  current: 0

  # Status: green (<80%), yellow (80-90%), orange (90-100%), red (>100%)
  status: green

  # Last measured timestamp
  last_measured: null

# Build configuration
build:
  # Main entry point
  entry_point: "src/__init__.py"

  # Test command
  test_command: "pytest tests/"

  # Build command (if applicable)
  build_command: null  # "cargo build" for Rust, "npm run build" for JS

  # Output directory
  output_dir: null

# Quality standards
quality:
  # Minimum test coverage percentage
  min_coverage: 80

  # TDD required
  tdd_required: true

  # Linting required
  linting_required: true

# Metadata
metadata:
  # Created timestamp
  created: {{TIMESTAMP}}

  # Last modified
  modified: {{TIMESTAMP}}

  # Component maintainers
  maintainers:
    - orchestration-system

  # Tags for categorization
  tags:
    []  # - audio
        # - processing
        # - ml
